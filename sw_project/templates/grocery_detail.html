{% extends "base.html" %}
{% load static %}

{% block title %}{{ grocery.name }} - Детали{% endblock %}
{% block head %}
  <link rel="stylesheet" href="{% static 'css/grocery_detail.css' %}">
{% endblock %}
{% block content %}
<section id="grocery-detail" class="py-5">
  <div class="product-info" data-aos="fade-up">
    <h1>{{ grocery.name }}</h1>
    <p>{{ grocery.description }}</p>
  </div>

  <div class="popular-groceries">
    <h3 data-aos="fade-up">Популярные товары</h3>
    <div class="carousel" data-aos="zoom-in">
  {% for image in images %}
    {% if image.is_active %}
      <div class="image-wrapper">
        <div class="circle-image image-{{ forloop.counter0 }}">
          <picture>
            {% if image.image_webp %}
              <source srcset="{{ image.image_webp.url }}" type="image/webp">
            {% endif %}
            <img src="{{ image.image.url }}" alt="Изображение к {{ grocery.name }}" class="grocery-image">
          </picture>
        </div>
        <p class="image-description">
          {{ image.description }}&nbsp;
          {% if image.volumes.exists %}
            {% for volume in image.volumes.all %}
                {{ volume.value }}{{ volume.measurement_unit }}
                {% if not forloop.last %}/{% endif %}
            {% endfor %}
          {% endif %}
        </p>
      </div>
    {% endif %}
  {% endfor %}
  </div>
  {% if grocery.certificate %}
    <button id="btn-certificate" class="btn btn-certificate">Сертификат дистрибуции</button>
    <div id="modal" class="modal">
      <img src="{{ grocery.certificate.url }}" alt="Сертификат">
      <span class="close">&times;</span>
    </div>
  {% endif %}
</div>
{% endblock %}
{% block scripts %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.min.js" defer></script>
  <script src="{% static 'js/main.js' %}" defer></script>
  <script src="{% static 'js/grocery_detail.js' %}" defer></script>
{% endblock %}

